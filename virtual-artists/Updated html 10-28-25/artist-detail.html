<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Artist - AetherWave Studio</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root { --bg1:#0a0a0a; --bg2:#1a1a2e; --bg3:#16213e; --cyan:#00d4ff; --violet:#7b2ff7; --magenta:#f72585; --text:#ffffff; --muted:#a0a0a0; --card:#1a1a2e; --line:#333355; }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:'Inter',sans-serif;color:var(--text);background:radial-gradient(1200px 800px at 80% -10%,#7b2ff722 0%,transparent 60%),radial-gradient(1000px 600px at -10% 20%,#00d4ff22 0%,transparent 60%),linear-gradient(135deg,var(--bg1),var(--bg2) 50%,var(--bg3));min-height:100vh;overflow-x:hidden}
    a{color:inherit;text-decoration:none}
    .container{max-width:1200px;margin:0 auto;padding:24px}
    header{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:16px 0 8px;border-bottom:1px solid var(--line);margin-bottom:28px}
    .brand{display:flex;flex-direction:column}
    .logo{font-family:'Orbitron',sans-serif;font-weight:900;letter-spacing:2px;font-size:1.2rem;background:linear-gradient(135deg,var(--cyan),var(--violet),var(--magenta));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}
    .tagline{font-size:.75rem;color:var(--muted);letter-spacing:2px}
    .back-link{font-size:.85rem;opacity:.9;padding:10px 14px;border-radius:10px;border:1px solid var(--line)}
    .back-link:hover{border-color:#00d4ff80}
    .hero{position:relative;height:400px;border-radius:20px;overflow:hidden;margin-bottom:40px;background:linear-gradient(135deg,var(--violet)33,var(--cyan)33)}
    .hero-image{width:100%;height:100%;object-fit:cover}
    .hero-overlay{position:absolute;bottom:0;left:0;right:0;padding:30px;background:linear-gradient(to top,rgba(0,0,0,.9),transparent)}
    .hero-title{font-family:'Orbitron',sans-serif;font-size:3rem;margin-bottom:8px;background:linear-gradient(135deg,var(--cyan),var(--magenta));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}
    .hero-genre{font-size:1.2rem;color:var(--muted);letter-spacing:2px}
    .stats{display:flex;gap:40px;margin-bottom:40px;flex-wrap:wrap}
    .stat{text-align:center}
    .stat-value{font-family:'Orbitron',sans-serif;font-size:2rem;color:var(--cyan);display:block}
    .stat-label{font-size:.9rem;color:var(--muted);text-transform:uppercase;letter-spacing:1px}
    .section{margin-bottom:50px}
    .section-title{font-family:'Orbitron',sans-serif;font-size:1.8rem;margin-bottom:20px;color:var(--cyan);padding-bottom:10px;border-bottom:2px solid var(--line)}
    .bio{font-size:1.1rem;line-height:1.8;color:#d0d0d0}
    .cta-buttons{display:flex;gap:20px;flex-wrap:wrap}
    .btn{display:inline-block;padding:14px 28px;background:linear-gradient(135deg,var(--cyan),var(--violet));border-radius:25px;font-weight:600;text-transform:uppercase;letter-spacing:1px;transition:all .3s ease}
    .btn:hover{background:linear-gradient(135deg,var(--violet),var(--magenta));box-shadow:0 5px 15px rgba(247,37,133,.3);transform:translateY(-2px)}
    .btn-secondary{background:linear-gradient(135deg,var(--violet),var(--magenta))}
    .btn-secondary:hover{background:linear-gradient(135deg,var(--magenta),#ff006e)}
    .empty-state{text-align:center;padding:60px 20px;color:var(--muted)}
    .empty-state h2{font-family:'Orbitron',sans-serif;color:var(--cyan);margin-bottom:15px}
    .empty-state a{color:var(--cyan);text-decoration:underline}
    footer{margin:40px 0 12px;color:var(--muted);font-size:.85rem;text-align:center}
    @media (max-width:768px){.hero-title{font-size:2rem}.stats{gap:20px}.cta-buttons{flex-direction:column}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">AETHERWAVE STUDIO</div>
        <div class="tagline">AI MUSIC • HUMAN SOUL • IMMERSIVE SOUND</div>
      </div>
      <a class="back-link" href="/virtual-artists/"><span aria-hidden="true">←</span> Back</a>
    </header>

    <div id="artistContent"></div>
  </div>

  <footer>© <span id="year"></span> AetherWave Studio</footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    function escapeHtml(str){ return String(str ?? '').replace(/[&<>"']/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[s])); }
    function getSlugFromQuery(){ return new URLSearchParams(location.search).get('slug')?.trim().toLowerCase() || ''; }
    function getDirSlug(){ const parts = location.pathname.split('/').filter(Boolean); return parts.length>=1 ? (parts[parts.length-1]==='index.html' && parts.length>=2 ? parts[parts.length-2].toLowerCase() : parts[parts.length-1].toLowerCase()) : ''; }
    function currentSlug(){ const q=getSlugFromQuery(); if(q && !q.endsWith('.html')) return q; return getDirSlug(); }

    async function loadData() {
      try {
        const res = await fetch('/virtual-artists/data/content.json', { cache: 'no-cache' });
        if (!res.ok) throw new Error('no content.json');
        return await res.json();
      } catch {
        return {
          artists: JSON.parse(localStorage.getItem('aetherwave_artists') || '[]'),
          gallery: JSON.parse(localStorage.getItem('aetherwave_gallery') || '[]'),
          merch: JSON.parse(localStorage.getItem('aetherwave_merch') || '[]')
        };
      }
    }

    function renderArtistFromData(data, slug){
      const artists = Array.isArray(data?.artists) ? data.artists : [];
      const artist = artists.find(a => (a.slug||'').toLowerCase() === slug);
      const content = document.getElementById('artistContent');
      if(!content) return;

      if(!artist){
        content.innerHTML = `<div class="empty-state"><h2>Artist Not Found</h2><p>No artist with slug "<strong>${escapeHtml(slug)}</strong>" exists.</p></div>`;
        document.title = `Artist Not Found – AetherWave Studio`;
        return;
      }

      const name = escapeHtml(artist.name || 'Untitled Artist');
      const genre = escapeHtml(artist.genre || 'Unknown Genre');
      const bio = escapeHtml(artist.bio || 'No bio available.');
      const heroImage = (artist.heroImage||'').trim() || 'https://placehold.co/1200x400/667eea/ffff/png?text=Hero+Image';
      const tracks = escapeHtml((artist.tracks||'0').toString());
      const followers = escapeHtml((artist.followers||'0').toString());

      document.title = `${name} – AetherWave Studio`;

      content.innerHTML = `
        <div class="hero">
          <img src="${heroImage}" alt="${name}" class="hero-image" onerror="this.src='https://placehold.co/1200x400/667eea/ffff/png?text=Hero+Image'">
          <div class="hero-overlay">
            <h1 class="hero-title">${name}</h1>
            <div class="hero-genre">${genre}</div>
          </div>
        </div>

        <div class="stats">
          <div class="stat">
            <span class="stat-value">${tracks}</span>
            <span class="stat-label">Tracks</span>
          </div>
          <div class="stat">
            <span class="stat-value">${followers}</span>
            <span class="stat-label">Followers</span>
          </div>
        </div>

        <div class="section">
          <h2 class="section-title">About</h2>
          <p class="bio">${bio}</p>
        </div>

        <div class="section">
          <h2 class="section-title">Explore</h2>
          <div class="cta-buttons">
            <a href="gallery.html" class="btn">View Gallery</a>
            <a href="merch.html" class="btn btn-secondary">Shop Merch</a>
          </div>
        </div>
      `;
    }

    (async function init(){
      const slug = currentSlug();
      const data = await loadData();
      renderArtistFromData(data, slug);
    })();
  </script>
</body>
</html>